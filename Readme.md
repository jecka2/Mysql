###  44. MySQL: Backup + Репликация 
#### Что нужно сделать?

В материалах приложены ссылки на вагрант для репликации и дамп базы bet.dmp

Базу развернуть на мастере и настроить так, чтобы реплицировались таблицы:


| bookmaker          |
| competition        |
 market              |
| odds               |
| outcome

Настроить GTID репликацию

варианты которые принимаются к сдаче

рабочий вагрантафайл
скрины или логи SHOW TABLES
конфиги*

пример в логе изменения строки и появления строки на реплике*


#### Решение


Запуск стенда

```bash 
ansible-playbook main.yml --ask-vault-pass
```

Данный плейбук выполнит следующие действия:

1) Создаст 2 виртуальные машины в виртуализации Proxmox ( main -192.168.1.20 и secondary -192.168.1.21)
2) Установит и настроит mysql-server  на обоих машинах и настроит репликацию.
3) На мастер произведте ипорт БД из задания

Проверяем  настроки и базы данных на main сервере

![](screenshots\Main.png)


Проверяем, что на сервере secondary включилась репликация и дамп базы импортированный на main  так же доступен и тут

![](screenshots\Slave.png)

![](screenshots\Database_on_slave.png)


После этого на main сервере добавим информацию в таблицу bookmaker 

![](screenshots\add_1xbet_to_master.png)

Проверим что эти данные так же реплицировались на secondary

![](screenshots\1xbet_on_secondary.png)